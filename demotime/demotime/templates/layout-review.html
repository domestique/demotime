{% extends 'layout-user.html' %}

{% block sub_nav %}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <div class="container">
        <a href="{% url 'index' %}">Your dashboard</a> &gt;
        <a href="{% url 'project-dashboard' project.slug %}">{{ project.name }}</a> &gt;
        {% block crumbs_contents %}{% endblock %}
    </div>
</div>
{% endblock %}

{% block styles %}
{{ block.super }}
<style>
a.error {
    transition:5s;
}
h1 em {
    font-style: normal;
    font-size: 20px;
    vertical-align: middle;
    color: #999;
}
.review h3 {
    font-size:1.1em;
    font-weight:400;
}
.review select {
    margin-bottom:2em;
}
.review {
    font-size: 12px;
}
.form-group.first {
    margin-top: 0;
}
.attachments {
    margin-top: 30px;
}
@media screen and (max-width:680px) {
    h3 small {
        display: block;
        font-size: 11px;
    }
}
</style>
{% endblock %}

{% block content %}
<h1>{% block page_title %}{% endblock %}</h1>
<article>
    <section>
        <div class="review">
            <form action="" method="post" enctype="multipart/form-data" id="submit_review">
                {% csrf_token %}
                <div class="form-group" style="margin-top: 0">
                    <h3 class="icon icon-lightbulb">{{ review_form.title.label }} <small>ex. "TP #1234: Destroyed Tetsuo as his power grew out of control"</small></h3>
                    {{ review_form.title.errors }}
                    {{ review_form.title }}
                </div>
                <div class="form-group">
                    <h3 class="icon icon-link-ext">{{ review_form.case_link.label }} <small>ex. https://someproject.tpondemand.com/entity/1234</small></h3>
                    {{ review_form.case_link.errors }}
                    {{ review_form.case_link }}
                </div>
                <div class="form-group">
                    <h3 class="icon icon-pencil">{% block description_leader %}{% endblock %}{{ review_form.description.label }}{% block description_follower %}{% endblock %}</h3>
                    {{ review_form.description }}
                    {{ review_form.description.errors }}
                </div>
                <div class="attachments">
                    <h3 class="icon icon-attach">Attachments <small>Visually present with screenshots, screencasts, documents, etc</small></h3>
                    {{ attachment_forms.management_form }}
                    {% for form in attachment_forms %}
                        <section {% if forloop.counter > 1 %}style="display:none"{% endif %}>
                            {% include "includes/attachments_form.html" with form=form cols=3 %}
                            {{ form.attachment.errors }}
                        </section>
                    {% endfor %}
                </div>
                <h3>
                    Reviewers and Followers
                    <span class="help" title="When you assign someone as a 'reviewer' they
                    will need to either approve or reject a demo. A follower can simply follow
                    the progress of a demo without the ability or need to approve or reject."></span>
                    <small>Hold down 'cmd' to select multiple people</small>
                </h3>
                <div class="split~680 by:2 with-gap:3">
                    <div class="cel">
                        <div class="form-group">
                            <h3 class="icon icon-user">{{ review_form.reviewers.label }}</h3>
                            {{ review_form.reviewers.errors }}
                            {{ review_form.reviewers }}
                        </div>
                    </div>
                    <div class="cel">
                        <div class="form-group">
                            <h3 class="icon icon-user">{{ review_form.followers.label }}</h3>
                            {{ review_form.followers.errors }}
                            {{ review_form.followers }}
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <input type="submit" value="{% block button_text %}{% endblock %}">
                    <input type="button" value="Cancel" onclick="javascript: history.go(-1)">
                </div>
            </form>
        </div>
    </section>
</article>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script src="/static/scripts/review_utils.js"></script>
{% endblock %}
